CREATE OR REPLACE PROCEDURE LOGIN
(
  vUSERNAME IN VARCHAR2
, vPASSWORD IN VARCHAR2
, vSESSION_ID OUT VARCHAR2
) AS
    USER_ID INT;
BEGIN
    SELECT Users.ID INTO USER_ID FROM Users WHERE username = vUSERNAME AND password = vPASSWORD;
    IF USER_ID IS NOT NULL THEN
        vSESSION_ID := DBMS_RANDOM.STRING('A', 10);
        INSERT INTO Sessions(id, id_user, S_Start, S_Last) VALUES (vSESSION_ID, USER_ID, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
    ELSE
        vSESSION_ID := 0;
    END IF;
   
END LOGIN;